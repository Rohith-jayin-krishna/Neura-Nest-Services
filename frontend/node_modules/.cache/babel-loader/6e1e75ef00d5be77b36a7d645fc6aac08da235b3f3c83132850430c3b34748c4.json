{"ast":null,"code":"import { jsx as b } from \"react/jsx-runtime\";\nimport { useMemo as D, useRef as E, useImperativeHandle as F, useEffect as S, useCallback as v } from \"react\";\nimport w from \"flatpickr\";\nconst H = [\"onCreate\", \"onDestroy\"],\n  k = [\"onChange\", \"onOpen\", \"onClose\", \"onMonthChange\", \"onYearChange\", \"onReady\", \"onValueUpdate\", \"onDayCreate\"],\n  R = (e, c) => (k.forEach(r => {\n    const o = c[r],\n      n = e[r];\n    if (o) {\n      n && !Array.isArray(n) ? e[r] = [e[r]] : e[r] || (e[r] = []);\n      const C = Array.isArray(o) ? o : [o];\n      e[r].length === 0 ? e[r] = C : e[r].push(...C);\n    }\n  }), k.forEach(r => {\n    delete c[r];\n  }), H.forEach(r => {\n    delete c[r];\n  }), e),\n  M = e => {\n    const c = D(() => ({\n        ...e\n      }), [e]),\n      {\n        defaultValue: r,\n        options: o = {},\n        value: n,\n        children: C,\n        render: u,\n        onCreate: h,\n        onDestroy: m\n      } = c,\n      g = D(() => R(o, c), [o, c]),\n      l = E(null),\n      t = E(void 0);\n    F(e.ref, () => ({\n      get flatpickr() {\n        return t.current;\n      }\n    }), []), S(() => {\n      const i = () => {\n          var a;\n          g.onClose = g.onClose || (() => {\n            var f;\n            (f = l.current) != null && f.blur && l.current.blur();\n          }), t.current = (((a = w) == null ? void 0 : a.default) || w)(l.current, g), h == null || h(t.current);\n        },\n        s = () => {\n          m == null || m(t.current), t.current && t.current.destroy(), t.current = void 0;\n        };\n      return i(), () => {\n        s();\n      };\n    }, [g, h, m]), S(() => {\n      var i;\n      if (t.current) {\n        const s = Object.getOwnPropertyNames(g);\n        for (let a = s.length - 1; a >= 0; a--) {\n          const f = s[a];\n          let y = g[f];\n          (y == null ? void 0 : y.toString()) !== ((i = t.current.config[f]) == null ? void 0 : i.toString()) && (k.includes(f) && !Array.isArray(y) && (y = [y]), t.current.set(f, y));\n        }\n        n !== void 0 && n !== t.current.input.value && t.current.setDate(n, !1);\n      }\n    }, [g, n]);\n    const A = v(i => {\n      l.current = i;\n    }, []);\n    if (u) return u({\n      ...c,\n      defaultValue: r,\n      value: n\n    }, A);\n    const x = v(i => {\n      var s, a;\n      e && e.onChange && (Array.isArray(e == null ? void 0 : e.onChange) ? (s = e == null ? void 0 : e.onChange) == null || s.forEach(() => [new Date(i.target.value)], (n == null ? void 0 : n.toString()) || \"\") : typeof e.onChange == \"function\" && ((a = e == null ? void 0 : e.onChange) == null || a.call(e, [new Date(i.target.value)], (n == null ? void 0 : n.toString()) || \"\", t.current)));\n    }, [e, n]);\n    return o.wrap ? /* @__PURE__ */b(\"div\", {\n      className: \"flatpickr\",\n      ref: A,\n      children: C\n    }) : /* @__PURE__ */b(\"input\", {\n      onChange: x,\n      ...c,\n      value: n == null ? void 0 : n.toString(),\n      defaultValue: r,\n      ref: A\n    });\n  };\nexport { M as default };","map":{"version":3,"names":["H","k","R","mergeHooks","e","c","forEach","r","o","n","Array","isArray","C","length","push","M","D","defaultValue","options","value","children","render","u","onCreate","h","onDestroy","m","g","l","E","t","F","ref","flatpickr","current","S","i","createFlatpickrInstance","onClose","f","blur","a","w","default","s","destroyFlatpickrInstance","destroy","Object","getOwnPropertyNames","y","toString","config","includes","set","input","setDate","A","v","x","onChange","Date","target","call","wrap","b","className"],"sources":["/Users/rohithjayin/PROJECTS/neura-nest/node_modules/react-flatpickr/lib/DateTimePicker.tsx"],"sourcesContent":["import React, {useEffect, useRef, FC, useMemo, useCallback, useImperativeHandle, ChangeEventHandler} from 'react';\nimport flatpickr from 'flatpickr';\nimport {Options, DateOption, Plugin, ParsedOptions} from 'flatpickr/dist/types/options';\nimport {DateTimePickerProps} from '../types/react-flatpickr';\nimport type {OptionsType} from '../types/react-flatpickr';\n\nconst callbacks = ['onCreate', 'onDestroy'] as const;\nconst hooks = [\n  'onChange',\n  'onOpen',\n  'onClose',\n  'onMonthChange',\n  'onYearChange',\n  'onReady',\n  'onValueUpdate',\n  'onDayCreate'\n] as const;\n\nconst mergeHooks = (inputOptions: flatpickr.Options.Options, props: DateTimePickerProps): OptionsType => {\n  hooks.forEach((hook: string) => {\n    const hookFn = props[hook as keyof DateTimePickerProps];\n    const existingHookFn = inputOptions[hook as keyof Options];\n    if (hookFn) {\n      if (existingHookFn && !Array.isArray(existingHookFn)) {\n        (inputOptions as any)[hook] = [(inputOptions as any)[hook]];\n      } else if (!(inputOptions as any)[hook]) {\n        (inputOptions as any)[hook] = [];\n      }\n\n      const propHook = Array.isArray(hookFn) ? hookFn : [hookFn];\n      if ((inputOptions as any)[hook].length === 0) {\n        (inputOptions as any)[hook] = propHook;\n      } else {\n        (inputOptions as any)[hook].push(...propHook);\n      }\n    }\n  });\n\n  hooks.forEach((hook) => {\n    delete (props as any)[hook];\n  });\n  callbacks.forEach((callback) => {\n    delete (props as any)[callback];\n  });\n\n  return inputOptions;\n};\n\nexport const DateTimePicker: FC<DateTimePickerProps> = (defaultProps) => {\n  const props = useMemo(() => ({...defaultProps}), [defaultProps]);\n  const {defaultValue, options = {}, value, children, render, onCreate, onDestroy} = props;\n  const mergedOptions = useMemo(() => mergeHooks(options, props), [options, props]);\n  const nodeRef = useRef<HTMLElement | null>(null);\n  const flatpickrRef = useRef<flatpickr.Instance>(undefined);\n\n  useImperativeHandle(\n    defaultProps.ref,\n    () => {\n      return {\n        get flatpickr() {\n          return flatpickrRef.current;\n        }\n      };\n    },\n    []\n  );\n\n  useEffect(() => {\n    const createFlatpickrInstance = () => {\n      mergedOptions.onClose =\n        mergedOptions.onClose ||\n        (() => {\n          if (nodeRef.current?.blur) nodeRef.current.blur();\n        });\n\n      // @ts-expect-error for some reason the default import isnt working correctly\n      flatpickrRef.current = (flatpickr?.default || flatpickr)(nodeRef.current as HTMLElement, mergedOptions);\n\n      onCreate?.(flatpickrRef.current);\n    };\n\n    const destroyFlatpickrInstance = () => {\n      onDestroy?.(flatpickrRef.current);\n      if (flatpickrRef.current) {\n        flatpickrRef.current.destroy();\n      }\n      flatpickrRef.current = undefined;\n    };\n\n    createFlatpickrInstance();\n\n    return () => {\n      destroyFlatpickrInstance();\n    };\n  }, [mergedOptions, onCreate, onDestroy]);\n\n  useEffect(() => {\n    if (flatpickrRef.current) {\n      const optionsKeys = Object.getOwnPropertyNames(mergedOptions);\n      for (let index = optionsKeys.length - 1; index >= 0; index--) {\n        const key = optionsKeys[index];\n        let optionValue = mergedOptions[key as keyof OptionsType];\n\n        if (optionValue?.toString() !== flatpickrRef.current.config[key as keyof ParsedOptions]?.toString()) {\n          if (hooks.includes(key as any) && !Array.isArray(optionValue)) {\n            optionValue = [optionValue] as unknown as Plugin;\n          }\n\n          flatpickrRef.current.set(key as any, optionValue);\n        }\n      }\n\n      if (value !== undefined && value !== flatpickrRef.current.input.value) {\n        flatpickrRef.current.setDate(value as DateOption | DateOption[], false);\n      }\n    }\n  }, [mergedOptions, value]);\n\n  const handleNodeChange = useCallback((node: HTMLElement | null) => {\n    nodeRef.current = node;\n  }, []);\n\n  if (render) {\n    return render({...props, defaultValue, value}, handleNodeChange);\n  }\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      if (defaultProps && defaultProps.onChange) {\n        if (Array.isArray(defaultProps?.onChange)) {\n          defaultProps?.onChange?.forEach(() => [new Date(e.target.value)], value?.toString() || '');\n        } else if (typeof defaultProps.onChange === 'function') {\n          defaultProps?.onChange?.([new Date(e.target.value)], value?.toString() || '', flatpickrRef.current!);\n        }\n      }\n    },\n    [defaultProps, value]\n  );\n\n  return options.wrap ? (\n    <div className=\"flatpickr\" ref={handleNodeChange}>\n      {children}\n    </div>\n  ) : (\n    <input\n      // @ts-expect-error just allow all the passed props to be passed to the input\n      onChange={onChange}\n      {...props}\n      value={value?.toString()}\n      defaultValue={defaultValue}\n      ref={handleNodeChange}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}